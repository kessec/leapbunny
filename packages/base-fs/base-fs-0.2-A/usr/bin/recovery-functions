#!/bin/sh

BUTTON_LEFT="LEFT"
BUTTON_RIGHT="RIGHT"
BUTTON_UP="UP"
BUTTON_DOWN="DOWN"
BUTTON_SH_LEFT="L"
BUTTON_SH_RIGHT="R"
BUTTON_RED="RED"
BUTTON_ESC="ESC"
BUTTON_A="A"
BUTTON_B="B"
BUTTON_HOME="M"
BUTTON_HINT="H"
BUTTON_PAUSE="P"
BUTTON_BRIGHTNESS="X"

refresh ()
{
	# Draw screen
	# display_screen /var/screens/RECOVERY.png
	layer-control /dev/layer2 s enable off
	imager /dev/layer0 /var/screens/RECOVERY.png
	layer-control /dev/layer0 s enable on
	layer-control /dev/layer0 s dirty
	layer-control /dev/layer2 s dirty
}

MENU_START=3
MENU_END=9
SCR_END=14
cls ()
{
	clearmenu
	clearstat
}

clearmenu ()
{
	for i in `seq $MENU_START $MENU_END`; do
		drawtext /dev/layer0 /var/fonts/monotext8x16.rgb "                                        " $i 0
	done
}

clearstat ()
{
	for i in `seq $((MENU_END+1)) $SCR_END`; do
		drawtext /dev/layer0 /var/fonts/monotext8x16.rgb "                                        " $i 0
	done
}


# Exit with true if button is down.  Example
# if button_down $BUTTON_A; then echo "A is down" fi
button_down ()
{
	button $1 > /dev/null;
}

wait_for_button_up ()
{
	while button_down $1; do
		usleep 100000;
	done
}

