#!/bin/sh
for i in boot_image boot_source panic power request shutdown;  do
        echo -n $i=`cat /sys/devices/platform/lf1000-gpio/$i` ''
done
echo "raw=`cat /sys/devices/platform/lf1000-alvgpio/scratchpad`"

# Try to deduce what we should do
echo -n "REQUEST="
case `cat /sys/devices/platform/lf1000-gpio/request` in
	TRAPDOOR)
		echo "TRAPDOOR: Enter UI"
		;;
	SHORT)
		echo "SHORT: Short-circuit play boot scripts"
		;;
	FAILED)
		echo "FAILED: Boot of Play failed; force upadate"
		;;
	UNCLEAN)
		echo "UNCLEAN: Unclean shutdown; strong test; might update"
		;;
	BATTERY)
		echo "BATTERY: Power lost; weak test; might update"
		;;
	UPDATE)
		echo "UPDATE: Play kernel forcing update"
		;;
	RETURN)
		echo "RETURN: Recovery kernel returning to Play"
		;;
	PLAY)
		echo "PLAY: Normal operation"
		;;
	*)
		echo `cat /sys/devices/platform/lf1000-gpio/request` ": Unknown"
		;;
esac
