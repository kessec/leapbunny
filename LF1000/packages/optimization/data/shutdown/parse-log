#!/usr/bin/perl

use lib "../../../ts-utils";
use stats;

$s = new Stats;

while (<>)
{
    $power_button = $1, next if /\+\+\+\s*(\d+\.\d+).*Bgn power-button/;
    $umount_a = $1, next if /\+\+\+\s*(\d+\.\d+).*Bgn umount -a/;
    $restart = $1, if /(\d+\.\d+).*Restarting system/;
    next unless /Restarting system/;
    # printf ("%5.1f %5.1f (%5.1f)\n", 
    # 	    $power_button, $umount_a, $restart);
    # printf ("%5.1f %5.1f (%5.1f)\n", 
    # 	    $umount_a-$power_button, $restart-$power_button,
    # 	    $restart-$umount_a);
    $s->add($restart-$power_button);
    printf ("%.1f,%.1f\n", $umount_a-$power_button, $restart-$power_button);
    ($power_button, $umount_a, $restart) = undef;
}

printf ("%.1f/%.1f/%.1f\n", $s->min, $s->mean, $s->max);
