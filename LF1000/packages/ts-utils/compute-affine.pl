#!/usr/bin/perl

$sx1=480;
$sy1=272;

# channels=2
$x0=362; $y0=175; # target=1,0
$x1=710; $y1=871; # target=0,1
$x2=361; $y2=872; # target=0,0

# $x0=10; $y0=1;
# $x1=1;  $y1=10;
# $x2=1;  $y2=1;

$detA=$x0*($y1-$y2) - $x1*($y0-$y2) + $x2*($y0-$y1);

$c7 = 65536;
$s = $c7/$detA;

# $sx1=1;
# $sy1=1;

$c1=$sx1*($y1-$y2)*$s;
$c2=$sx1*($x2-$x1)*$s;
$c3=$sx1*($x1*$y2 - $x2*$y1)*$s;
$c4=$sy1*($y2-$y0)*$s;
$c5=$sy1*($x0-$x2)*$s;
$c6=$sy1*($x2*$y0 - $x0*$y2)*$s;

printf "%d %d %d %d %d %d %d\n", $c1, $c2, $c3, $c4, $c5, $c6, 65536;

printf "1,0=%d,%d\n", 
    ($c1*$x0 + $c2*$y0 + $c3)/$c7,
    ($c4*$x0 + $c5*$y0 + $c6)/$c7;
printf "0,1=%d,%d\n", 
    ($c1*$x1 + $c2*$y1 + $c3)/$c7,
    ($c4*$x1 + $c5*$y1 + $c6)/$c7;
printf "0,0=%d,%d\n", 
    ($c1*$x2 + $c2*$y2 + $c3)/$c7,
    ($c4*$x2 + $c5*$y2 + $c6)/$c7;
